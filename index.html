<!DOCTYPE html>
<html lang="en" ng-app="spindle">
  <head>
    <title>Spindle</title>
    <meta charset='utf-8'>

    <script type="text/javascript" src="//use.typekit.net/vct5zey.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>
    <div class="container" ng-controller="SpindleCtrl">
      <div class="index">
        <div class="index-header">
          Index
          <button class="add" ng-click="addPassage()">+</button>
        </div>

        <div class="index-body">
          <div ng-repeat="passage in passages">
            <div editable class="title" ng-model="passage.title" contenteditable=false></div>
          </div>
        </div>
      </div>

      <div ng-repeat="passage in passages" ng-animate=" 'passage' ">
        <div resizable draggable class="resizable passage" x={{passage.x}} y={{passage.y}} width={{passage.width}}>
          <div class="passage-header">
            <div editable class="passage-title" ng-model="passage.title" contenteditable=false tabindex=0></div>
          </div>
          <div class="passage-controls">
            <button ng-click="removePassage($index)">Ã—</button>
            <button ng-click="togglePassageVisibility($index)">-</button>
          </div>

          <div class="passage-body" ng-hide="isPassageVisible($index)">
            <hr>

            <div editor class="wmd-panel">
              <div class="wmd-button-bar" id="wmd-button-bar" ng-show="isEditing($index)"></div>
              <textarea input class="wmd-input" id="wmd-input" ng-model=passage.text ng-show="isEditing($index)"></textarea>
              <div class="preview-title" ng-show="isEditing($index)">Preview</div>
              <div class="wmd-preview" id="wmd-preview" ng-click="togglePassageEditing($index)"></div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-hero">Spindle</div>
    </footer>

    <script src="app/lib/angular/angular.min.js"></script>
    <script src="app/lib/pagedown/Markdown.Converter.js"></script>
    <script src="app/lib/pagedown/Markdown.Sanitizer.js"></script>
    <script src="app/lib/pagedown/Markdown.Editor.js"></script>
    <script src="app/lib/phpjs/nl2br.js"></script>
    <script src="app/main.js"></script>
    <script src="app/controllers.js"></script>
    <script src="app/directives.js"></script>
  </body>
</html>
